<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT資產管理 - 管理頁</title>
    <link rel="stylesheet" href="manage.css">
    <link rel="icon" type="image/png" href="logo.png">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body>
    <div class="manage-container">
        <aside class="sidebar">
            <h2 style="font-size:1.1em;">功能選單</h2>
            <ul class="sidebar-list">
                <li><button class="tab-btn" id="tab-asset" data-tab="asset">資產管理</button></li>
                <li><button class="tab-btn" id="tab-type" data-tab="type">類型管理</button></li>
                <li><button class="tab-btn" id="tab-user" data-tab="user">帳號管理</button></li>
                <li><button class="tab-btn" id="tab-role" data-tab="role">角色管理</button></li>
            </ul>
        </aside>
        <main class="main-content">
            <div class="top-bar">
                <h1 id="home-link" style="cursor:pointer;">IT資產管理 - 管理頁</h1>
                <button id="logout-btn">登出</button>
            </div>
            <section id="tab-content-asset">
                <h2>資產管理</h2>
                <section id="asset-form-section">
                    <h3>新增資產</h3>
                    <form id="asset-form">
                        <input type="text" id="name" placeholder="資產名稱" required>
                        <select id="type" required>
                            <option value="">請選擇資產類型</option>
                        </select>
                        <input type="text" id="owner" placeholder="用途" required>
                        <input type="text" id="location" placeholder="位置" required>
                        <button type="submit">新增</button>
                    </form>
                </section>
                <section id="asset-list-section">
                    <div style="margin-bottom:8px;">
                        <h3 style="margin:0;">資產清單</h3>
                        <div style="display:flex; align-items:center; justify-content:space-between; margin-top:8px;">
                            <button id="open-sort-modal-btn">排序功能</button>
                            <div style="flex:1"></div>
                            <select id="asset-type-filter-select" style="min-width:120px;"><option value="">全部類型</option></select>
                        </div>
                    </div>
                    <table id="asset-table">
                        <thead>
                            <tr>
                                <th>順序</th>
                                <th>名稱</th>
                                <th>類型</th>
                                <th>用途</th>
                                <th>位置</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 資產資料將由JS動態插入 -->
                        </tbody>
                    </table>
                </section>
                
                <!-- 編輯資產 Modal -->
                <div id="edit-asset-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:8px; min-width:400px;">
                        <h3>編輯資產</h3>
                        <form id="edit-asset-form">
                            <input type="hidden" id="edit-asset-id">
                            <div style="margin-bottom:15px;">
                                <label style="margin-right:8px;">資產名稱：</label>
                                <input type="text" id="edit-asset-name" required>
                            </div>
                            <div style="margin-bottom:15px;">
                                <label style="margin-right:8px;">資產類型：</label>
                                <select id="edit-asset-type" required>
                                    <option value="">請選擇資產類型</option>
                                </select>
                            </div>
                            <div style="margin-bottom:15px;">
                                <label style="margin-right:8px;">用途：</label>
                                <input type="text" id="edit-asset-owner" required>
                            </div>
                            <div style="margin-bottom:15px;">
                                <label style="margin-right:8px;">位置：</label>
                                <input type="text" id="edit-asset-location" required>
                            </div>
                            <div class="modal-actions">
                                <button type="button" onclick="closeEditAssetModal()" style="margin-right:10px;">取消</button>
                                <button type="submit">確定</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- 成功提示框 -->
                <div id="success-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px; border-radius:12px; min-width:300px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:20px;">
                            <div style="width:60px; height:60px; background:#4CAF50; border-radius:50%; margin:0 auto 15px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:30px;">✓</span>
                            </div>
                            <h3 style="margin:0; color:#333; font-size:1.3em;">編輯成功</h3>
                        </div>
                        <button id="success-ok-btn" style="padding:10px 30px; background:#4CAF50; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定</button>
                    </div>
                </div>

                <!-- 資產刪除確認 Modal -->
                <div id="delete-asset-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px 36px 32px 36px; border-radius:12px; min-width:340px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:18px;">
                            <div style="width:54px; height:54px; background:#F44336; border-radius:50%; margin:0 auto 14px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:28px;">&#9888;</span>
                            </div>
                            <h3 style="margin:0; color:#F44336; font-size:1.2em;">確定要刪除此資產？</h3>
                        </div>
                        <div class="modal-actions" style="position:static; justify-content:center; gap:18px; margin-top:0;">
                            <button id="delete-asset-cancel-btn" type="button" style="margin-right:10px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">取消</button>
                            <button id="delete-asset-confirm-btn" type="button" style="padding:8px 24px; background:#F44336; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定刪除</button>
                        </div>
                    </div>
                </div>

                <!-- 排序彈窗 -->
                <div id="sort-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:3000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:8px; min-width:400px; min-height:300px;">
                        <h3 style="margin-top:0;">拖曳調整資產順序</h3>
                        <ul id="sort-list" style="list-style:none; padding:0; margin:0 0 20px 0; max-height:300px; overflow:auto;"></ul>
                        <div style="text-align:right;">
                            <button id="sort-cancel-btn" type="button" style="margin-right:10px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">取消</button>
                            <button id="sort-confirm-btn" type="button" style="padding:8px 24px; background:#4CAF50; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定</button>
                        </div>
                    </div>
                </div>
            </section>
            <section id="tab-content-user" style="display:none;">
                <h2>帳號管理</h2>
                <div id="user-add-section">
                    <form id="user-add-form">
                        <input type="text" id="add-username" placeholder="帳號" required autocomplete="off">
                        <input type="password" id="add-password" placeholder="密碼" required autocomplete="new-password">
                        <select id="add-role" required>
                            <option value="">請選擇角色</option>
                        </select>
                        <button type="submit">新增帳號</button>
                    </form>
                </div>
                <div id="user-list-section">
                    <!-- 帳號管理功能 -->
                </div>
                
                <!-- 修改帳號 Modal -->
                <div id="edit-user-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:8px; min-width:300px;">
                        <h3>編輯帳號</h3>
                        <form id="edit-user-form">
                            <input type="hidden" id="edit-user-id">
                            <div style="margin-bottom:15px;">
                                <label>帳號：</label>
                                <span id="edit-username-display"></span>
                            </div>
                            <div style="margin-bottom:15px;">
                                <label>權限：</label>
                                <select id="edit-role" required>
                                    <option value="">請選擇角色</option>
                                </select>
                            </div>
                            <div style="margin-bottom:15px;">
                                <label>新密碼：</label>
                                <input type="password" id="edit-password" placeholder="留空表示不修改" autocomplete="new-password">
                            </div>
                            <div style="margin-bottom:15px;">
                                <label>備註：</label>
                                <input type="text" id="edit-remark" placeholder="備註">
                            </div>
                            <div class="modal-actions">
                                <button type="button" onclick="closeEditModal()" style="margin-right:10px;">取消</button>
                                <button type="submit">確定</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- 帳號編輯成功提示框 -->
                <div id="user-success-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px; border-radius:12px; min-width:300px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:20px;">
                            <div style="width:60px; height:60px; background:#4CAF50; border-radius:50%; margin:0 auto 15px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:30px;">✓</span>
                            </div>
                            <h3 style="margin:0; color:#333; font-size:1.3em;">編輯成功</h3>
                        </div>
                        <button id="user-success-ok-btn" style="padding:10px 30px; background:#4CAF50; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定</button>
                    </div>
                </div>

                <!-- 帳號刪除確認 Modal -->
                <div id="delete-user-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px 36px 32px 36px; border-radius:12px; min-width:340px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:18px;">
                            <div style="width:54px; height:54px; background:#F44336; border-radius:50%; margin:0 auto 14px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:28px;">&#9888;</span>
                            </div>
                            <h3 style="margin:0; color:#F44336; font-size:1.2em;">確定要刪除此帳號？</h3>
                        </div>
                        <div class="modal-actions" style="position:static; justify-content:center; gap:18px; margin-top:0;">
                            <button id="delete-user-cancel-btn" type="button" style="margin-right:10px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">取消</button>
                            <button id="delete-user-confirm-btn" type="button" style="padding:8px 24px; background:#F44336; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定刪除</button>
                        </div>
                    </div>
                </div>
            </section>
            <section id="tab-content-role" style="display:none;">
                <h2>角色管理</h2>
                <div id="role-add-section">
                    <h3>新增角色</h3>
                    <form id="role-add-form">
                        <input type="text" id="role-name" placeholder="角色名稱" required>
                        <button type="submit">新增角色</button>
                    </form>
                </div>
                <div id="role-list-section">
                    <h3>角色列表</h3>
                    <!-- 角色列表將由JS動態插入 -->
                </div>
                <!-- 編輯角色 Modal -->
                <div id="edit-role-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:8px; min-width:600px;">
                        <h3>編輯角色</h3>
                        <form id="edit-role-form">
                            <input type="hidden" id="edit-role-id">
                            <div style="display:flex; gap: 30px;">
                                <!-- 左邊：基本設定 -->
                                <div style="flex: 1;">
                                    <div style="margin-bottom:15px;">
                                        <label>角色名稱：</label>
                                        <input type="text" id="edit-role-name" required style="width: 100%;">
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <label>說明：</label>
                                        <input type="text" id="edit-role-desc" style="width: 100%;">
                                    </div>
                                    <div style="margin-bottom:15px;">
                                        <label>備註：</label>
                                        <input type="text" id="edit-role-remark" style="width: 100%;">
                                    </div>
                                </div>
                                <!-- 右邊：權限設定 -->
                                <div style="flex: 1;">
                                    <div style="margin-bottom:15px;">
                                        <label>權限設定：</label>
                                        <div id="edit-role-perms"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-actions">
                                <button type="button" onclick="closeEditRoleModal()" style="margin-right:10px;">取消</button>
                                <button type="submit">確定</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- 角色編輯成功提示框 -->
                <div id="role-success-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px; border-radius:12px; min-width:300px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:20px;">
                            <div style="width:60px; height:60px; background:#4CAF50; border-radius:50%; margin:0 auto 15px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:30px;">✓</span>
                            </div>
                            <h3 style="margin:0; color:#333; font-size:1.3em;">編輯成功</h3>
                        </div>
                        <button id="role-success-ok-btn" style="padding:10px 30px; background:#4CAF50; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定</button>
                    </div>
                </div>

                <!-- 角色刪除確認 Modal -->
                <div id="delete-role-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px 36px 32px 36px; border-radius:12px; min-width:340px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:18px;">
                            <div style="width:54px; height:54px; background:#F44336; border-radius:50%; margin:0 auto 14px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:28px;">&#9888;</span>
                            </div>
                            <h3 style="margin:0; color:#F44336; font-size:1.2em;">確定要刪除此角色？</h3>
                        </div>
                        <div class="modal-actions" style="position:static; justify-content:center; gap:18px; margin-top:0;">
                            <button id="delete-role-cancel-btn" type="button" style="margin-right:10px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">取消</button>
                            <button id="delete-role-confirm-btn" type="button" style="padding:8px 24px; background:#F44336; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定刪除</button>
                        </div>
                    </div>
                </div>
            </section>
            <section id="tab-content-type" style="display:none;">
                <h2>類型管理</h2>
                <div id="type-add-section">
                    <h3>新增類型</h3>
                    <form id="type-add-form">
                        <input type="text" id="type-name" placeholder="類型名稱" required>
                        <input type="text" id="type-description" placeholder="類型描述">
                        <button type="submit">新增類型</button>
                    </form>
                </div>
                <div id="type-list-section">
                    <h3>類型列表</h3>
                    <!-- 類型列表將由JS動態插入 -->
                </div>
                <!-- 編輯類型 Modal -->
                <div id="edit-type-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:30px; border-radius:8px; min-width:400px;">
                        <h3>編輯類型</h3>
                        <form id="edit-type-form">
                            <input type="hidden" id="edit-type-id">
                            <div style="margin-bottom:15px;">
                                <label>類型名稱：</label>
                                <input type="text" id="edit-type-name" required>
                            </div>
                            <div style="margin-bottom:15px;">
                                <label>描述：</label>
                                <input type="text" id="edit-type-description">
                            </div>
                            <div class="modal-actions">
                                <button type="button" onclick="closeEditTypeModal()" style="margin-right:10px;">取消</button>
                                <button type="submit">確定</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- 類型編輯成功提示框 -->
                <div id="type-success-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px; border-radius:12px; min-width:300px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:20px;">
                            <div style="width:60px; height:60px; background:#4CAF50; border-radius:50%; margin:0 auto 15px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:30px;">✓</span>
                            </div>
                            <h3 style="margin:0; color:#333; font-size:1.3em;">編輯成功</h3>
                        </div>
                        <button id="type-success-ok-btn" style="padding:10px 30px; background:#4CAF50; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定</button>
                    </div>
                </div>

                <!-- 類型刪除確認 Modal -->
                <div id="delete-type-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:2000;">
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px 36px 32px 36px; border-radius:12px; min-width:340px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                        <div style="margin-bottom:18px;">
                            <div style="width:54px; height:54px; background:#F44336; border-radius:50%; margin:0 auto 14px; display:flex; align-items:center; justify-content:center;">
                                <span style="color:white; font-size:28px;">&#9888;</span>
                            </div>
                            <h3 style="margin:0; color:#F44336; font-size:1.2em;">確定要刪除此類型？</h3>
                        </div>
                        <div class="modal-actions" style="position:static; justify-content:center; gap:18px; margin-top:0;">
                            <button id="delete-type-cancel-btn" type="button" style="margin-right:10px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">取消</button>
                            <button id="delete-type-confirm-btn" type="button" style="padding:8px 24px; background:#F44336; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定刪除</button>
                        </div>
                    </div>
                </div>
            </section>
            <div id="logout-confirm-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:4000;">
                <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:40px 36px 32px 36px; border-radius:12px; min-width:340px; text-align:center; box-shadow:0 4px 20px rgba(0,0,0,0.15);">
                    <div style="margin-bottom:18px;">
                        <div style="width:54px; height:54px; background:#FFA726; border-radius:50%; margin:0 auto 14px; display:flex; align-items:center; justify-content:center;">
                            <span style="color:white; font-size:28px;">&#9888;</span>
                        </div>
                        <h3 style="margin:0; color:#FFA726; font-size:1.2em;">確定要登出？</h3>
                    </div>
                    <div class="modal-actions" style="position:static; justify-content:center; gap:18px; margin-top:0;">
                        <button id="logout-cancel-btn" type="button" style="margin-right:10px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">取消</button>
                        <button id="logout-confirm-btn" type="button" style="padding:8px 24px; background:#FFA726; color:white; border:none; border-radius:6px; font-size:1em; cursor:pointer; transition:background 0.2s;">確定登出</button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="manage.js"></script>
</body>
</html> 